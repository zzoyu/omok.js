import{d as S,r as h,c as M,a as T,w as E,o as P,b as x,e as B,f as p,n as j,_ as C,u as W,g as $,h as k,i as b,j as H,B as Y,t as I,k as K}from"./index-89bb6663.js";var _=(s=>(s[s.EMPTY=0]="EMPTY",s[s.BLACK=1]="BLACK",s[s.WHITE=2]="WHITE",s))(_||{});const G=S("game",()=>{const s=h(!0),n=h(_.BLACK),i=h(),f=M(()=>s.value?"내 차례":"상대 차례"),l=h(Array.from(Array(10),()=>new Array(10).fill(_.EMPTY))),g=r=>{const u=(a,e,c,o=1)=>{if(o===5)return!0;const t={row:a.row+e.row,col:a.col+e.col};return t.row<0||t.col<0||t.row>=l.value.length||t.col>=l.value.length?!1:l.value[t.row][t.col]===c?u(t,e,c,o+1):!1},w=(a,e)=>{const c=[{row:1,col:0},{row:0,col:1},{row:1,col:1},{row:1,col:-1}];for(const o of c)if(u(a,o,e))return!0;return!1};for(let a=0;a<10;a++)for(let e=0;e<10;e++)if(l.value[a][e]===r&&w({row:a,col:e},r))return!0;return s.value=!s.value,!1},m=(r,u=n.value)=>{l.value[r.row][r.col]===_.EMPTY&&(l.value[r.row][r.col]=u,i.value=r)},d=()=>({row:0,col:0});return{myStone:n,lastStonePosition:i,isMyTurn:s,getTurnText:f,gameGrid:l,setStone:m,setOponentStone:r=>{const u=n.value===_.BLACK?_.WHITE:_.BLACK;if(r)m(r,u);else{const w=d();if(!w){window.alert("이겼습니다!");return}m(w,u)}s.value=!0},checkWinAndChangeTurn:g}}),L={class:"flex items-center justify-center"},D=T({__name:"TheGameBase",setup(s){const n=G(),i=h(0),f=h(0),l=e=>{const c=e.target.getBoundingClientRect(),o=e.clientX-c.left,t=e.clientY-c.top,v=Math.floor(t/64),A=Math.floor(o/64);i.value=v,f.value=A};E(()=>n.isMyTurn,e=>{e||j(()=>{n.setOponentStone()})});const g=e=>{if(!n.isMyTurn)return;const c=e.target.getBoundingClientRect(),o=e.clientX-c.left,t=e.clientY-c.top,v=Math.floor(t/64),A=Math.floor(o/64);d({row:v,col:A}),a(),j(()=>{n.checkWinAndChangeTurn(n.myStone)&&j(()=>{m()})})},m=()=>{alert("You win!")},d=e=>{n.setStone(e)},y=h(null),r=new Image;r.src="/omok.js/sample_black.png";const u=new Image;u.src="/omok.js/sample_white.png";const w=new Image;w.src="/omok.js/grid.png";const a=()=>{var c;const e=(c=y.value)==null?void 0:c.getContext("2d");if(e){e.imageSmoothingEnabled=!1,e.imageSmoothingQuality="low";for(let o=0;o<640;o+=64)for(let t=0;t<640;t+=64)e.drawImage(w,0,0,32,32,o,t,64,64);for(let o=0;o<10;o++)for(let t=0;t<10;t++){const v=n.gameGrid[o][t];v===_.BLACK?e.drawImage(r,0,0,32,32,t*64,o*64,64,64):v===_.WHITE&&e.drawImage(u,0,0,32,32,t*64,o*64,64,64)}if(n.isMyTurn&&(e.globalAlpha=.5,e.drawImage(r,f.value*64,i.value*64,64,64),e.globalAlpha=1),n.lastStonePosition){const{row:o,col:t}=n.lastStonePosition;e.strokeStyle="red",e.lineWidth=5,e.strokeRect(t*64,o*64,64,64)}requestAnimationFrame(a)}};return P(()=>{a()}),(e,c)=>(x(),B("div",L,[p("canvas",{ref_key:"canvas",ref:y,width:"640",height:"640",onClick:g,onMousemove:l},null,544)]))}}),R=C(D,[["__file","/home/runner/work/omok.js/omok.js/src/components/TheGameBase.vue"]]),U={class:"flex items-center justify-evenly w-full"},N=T({__name:"TheGameHUD",setup(s){const n=W(),i=()=>{n.back()},f=h(0),l=setInterval(()=>{f.value++},1e3);$(()=>{clearInterval(l)});const g=M(()=>{const m=Math.floor(f.value/60),d=f.value%60;return`${m}분 ${d}초`});return(m,d)=>(x(),B("div",U,[k(Y,{"on-click-confirm":{message:"정말로 기권하시겠습니까?",callback:i}},{default:b(()=>[H("기권")]),_:1},8,["on-click-confirm"]),p("h1",null,I(m.$route.meta.title),1),p("span",null,I(g.value),1)]))}}),O=C(N,[["__file","/home/runner/work/omok.js/omok.js/src/components/TheGameHUD.vue"]]),V={class:"flex items-center justify-evenly w-full"},X=T({__name:"TheGameInterface",setup(s){const n=G();return(i,f)=>(x(),B("div",V,[p("h1",null,I(K(n).getTurnText),1)]))}}),q=C(X,[["__file","/home/runner/work/omok.js/omok.js/src/components/TheGameInterface.vue"]]),F={class:"h-full w-full flex flex-col items-center justify-around"},Q=T({__name:"GameAlone",setup(s){return(n,i)=>(x(),B("main",F,[k(O),k(R),k(q)]))}}),J=C(Q,[["__file","/home/runner/work/omok.js/omok.js/src/views/GameAlone.vue"]]);export{J as default};
